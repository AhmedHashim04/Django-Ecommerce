
<section class="product_section layout_padding">
  <div class="container">
    <div class="heading_container heading_center">
      <h2>
        Our Products
      </h2>
    </div>
    <div class="row">
      {% for product in all_products|slice:":4" %}

        <div class="col-sm-6 col-lg-4">
          <div class="box">
            <div class="img-box">
              <img src="{% if product.PRDimage %}{{ product.PRDimage.PIMGimage.url }}{% else %}'https://via.placeholder.com/400'{% endif %}" alt="{{ product.PRDname }}" class="img-fluid" />

              <a href='{% url "products:cart" product.PRDslug  %}' class="add_cart_btn">
                <span>
                  {% if product not in user_cart or not user.is_authenticated %}Add To Cart{% else %}Remove from Cart{% endif %}
                </span>
              </a>
              
            </div>
            
            {% if product not in user_love or not user.is_authenticated %}
            <a href='{% url "products:love" product.PRDslug  %}' class="add_cart_btn btn btn-success w-50">
              <span >
                Add To Wishlist
              </span>
            </a>
            {% else %}
            <a href='{% url "products:love" product.PRDslug  %}' class="add_cart_btn btn btn-danger w-50">
              <span >
                Remove Wishlist
              </span>
            </a>
            {% endif %}
            
            
            <div class="detail-box">
              <a href='{% url "product:product_detail" product.PRDslug %}' class="d-flex align-items-center">

                <h5>
                  {{ product.PRDname }}
                </h5>
              </a>
              <div class="product_info">
                <h5>
                  <span>$</span> {{ product.PRDprice }}
                </h5>
                
                <div class="star_container">
                  {% if product.overall_rating >= 1 %}<i class="fa fa-star" aria-hidden="true"></i>{% else %}<i class="fa fa-star-o" aria-hidden="true"></i>{% endif %}
                  {% if product.overall_rating >= 2 %}<i class="fa fa-star" aria-hidden="true"></i>{% else %}<i class="fa fa-star-o" aria-hidden="true"></i>{% endif %}
                  {% if product.overall_rating >= 3 %}<i class="fa fa-star" aria-hidden="true"></i>{% else %}<i class="fa fa-star-o" aria-hidden="true"></i>{% endif %}
                  {% if product.overall_rating >= 4 %}<i class="fa fa-star" aria-hidden="true"></i>{% else %}<i class="fa fa-star-o" aria-hidden="true"></i>{% endif %}
                  {% if product.overall_rating >= 5 %}<i class="fa fa-star" aria-hidden="true"></i>{% else %}<i class="fa fa-star-o" aria-hidden="true"></i>{% endif %}
                </div>

              </div>
            </div>
          </div>
        </div>
      {% endfor %}

    </div>

    <div class="btn_box">
      <a href="{% url 'products:products_list' %}" class="view_more-link">
        View More
      </a>
    </div>
  </div>
</section>
