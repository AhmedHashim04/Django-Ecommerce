{% load static %}


<body>
    <div class="container">
        <div class="product-header">
            <h2>{{ product.PRDname }}</h2>
            <p>Price: ${{ product.PRDprice }}</p>
        </div>

        <div class="row product-info">
            <div class="col-md-6">
                <h4>Product Description</h4>
                <p>{{ product.PRDdesc }}</p>
            </div>
            <div class="col-md-6">
                <img src="{% if product.PRDimage %}{{ product.PRDimage.PIMGimage.url }}{% else %}{% static 'image/items/item-9.png' %}{% endif %}" alt="{{ product.PRDname }}" class="img-fluid">
            </div>
            <div class="col-md-8">
                <h4>Product Images</h4>
                <div class="product-carousel">
                    {% for image in product.PRDimage_set.all %}
                        <img src="{{ image.PIMGimage.url }}" alt="Product Image {{ forloop.counter }}">
                    {% endfor %}
                </div>
            </div>
        </div>

        <div class="review-section">
            <h3>Review This Product</h3>

            
            <form method="POST">
                {% csrf_token %}
                <div class="mb-3">
                    <label for="review" class="form-label">Write a review:</label>
                    {{ form.REVcontent }}
                </div>
                
                <div class="mb-3">
                    <label class="form-label">Rate this product:</label>
                    <div class="rating-stars">
                        {{form.REVrating}}
                    </div>
                </div>

                <button type="submit" class="btn btn-primary">Submit Review</button>
            </form> 
        </div>
        

        <div class="container">
            <div class="review-filter">
                <h4>Filter Reviews</h4>
                <div class="btn-group" role="group" aria-label="Review Filter">
                    <button type="button" class="btn btn-primary" id="filter-all">All Reviews</button>
                    <button type="button" class="btn btn-success" id="filter-good">Good Reviews</button>
                    <button type="button" class="btn btn-danger" id="filter-bad">Bad Reviews</button>
                </div>
            </div>
            <br>
            <div id="reviews-section">
                <!-- Example Good Review -->
                {% for review in reviews %}
                <div class="card review-card good-review">
                    <div class="card-body">
                        <h5 class="card-title">{{review.REVuser}}</h5>
                        <p class="card-text">{{review.REVcontent}}</p>                        
                        {% if review.REVrating == 1 %}
                        <p class="card-text star-rating">★☆☆☆☆</p>
                        {% elif review.REVrating == 2 %}
                        <p class="card-text star-rating">★★☆☆☆</p>
                        {% elif review.REVrating == 3 %}
                        <p class="card-text star-rating">★★★☆☆</p>
                        {% elif review.REVrating == 4 %}
                        <p class="card-text star-rating">★★★★☆</p>
                        {% elif review.REVrating == 5 %}
                        <p class="card-text star-rating">★★★★★</p>
                        {% endif %}
                            
                    </div>
                    
                </div>
                <br>
                {% endfor %}
        
                <!-- Example Bad Review -->
                <div class="card review-card bad-review">
                    <div class="card-body">
                        <h5 class="card-title">Jane Smith</h5>
                        <p class="card-text">Good value for the price, but could be improved in some areas.</p>
                        <p class="card-text star-rating">★★★★☆</p>
                    </div>
                </div>
        
                <!-- More reviews... -->
            </div>
        </div>
        
        <script>
            // JavaScript to filter reviews
            document.getElementById('filter-all').addEventListener('click', function() {
                document.querySelectorAll('.review-card').forEach(function(card) {
                    card.style.display = 'block';
                });
            });
        
            document.getElementById('filter-good').addEventListener('click', function() {
                document.querySelectorAll('.review-card').forEach(function(card) {
                    if (card.classList.contains('good-review')) {
                        card.style.display = 'block';
                    } else {
                        card.style.display = 'none';
                    }
                });
            });
        
            document.getElementById('filter-bad').addEventListener('click', function() {
                document.querySelectorAll('.review-card').forEach(function(card) {
                    if (card.classList.contains('bad-review')) {
                        card.style.display = 'block';
                    } else {
                        card.style.display = 'none';
                    }
                });
            });
        </script>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
</body>
